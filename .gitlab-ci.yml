stages:
  - setup
  - tests

setup_venv:
  stage: setup
  script:
    - python -m venv env
    - cd env/Scripts
    - activate.bat
    - pip install pytest
    - pip install psutil
  allow_failure: true

test:
  stage: tests
  dependencies:
    - setup_venv
  script:
    - cd env/Scripts
    - activate.bat
    - cd ../../tests
    - pytest -s
  allow_failure: true